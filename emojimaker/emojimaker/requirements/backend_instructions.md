# Project Overview

# Tech Stack

# Tables and buckets already created

Supabase storage bucket : "emojimaker"

 Table profiles (
   user_id text primary key,
   credits integer default 3 Not null,
   tier text not null default 'Free' check (tier in ('free','Pro')),
   stripe_customer_id text,
   stripe_subscription_id text,
   created_at timestamp with time zone default current_timestamp not null,
   updated_at timestamp with time zone default current_timestamp not null
 )

  Table emojis (
   id bigint primary key generated by default as identity,
   image_url text not null,
   prompt text not null,
   likes_count numeric default 0,
   creator_user_id text not null,
   created_at timestamp with time zone default now()

 )

 # Requirements

 1. Create a user to user table
   1. After a user sign in via clerk, we should get userId from Clerk and check if this userId already exits in 'profiles' table, matching 'user_id'
   2.If the user doesnt exit , then create a user in 'profiles' table
   3. If the user exist already then proceed, and pass on user_id to functions like generate emojis
2. Upload emoji to "emojimaker" supabase storage bucket
   1. When user generating an emoji, upload the emoji image file returned from Replicate to supabase "emojimaker" storage bucket
   2. Add the image url to the "emojis" data table as 'image_url' and creator_user_id to be actual user_id
3. Display all emojis in emojigrid
   1.Emoji grid should fetch and display all image from "emojis" data table
   2. when a new emojis is generated ,the emojigrid should be updated automatically to add new emoji to the grid
4. Likes interaction
   1. when an user check on 'like' button , the num_likes should increase on the "emojis" table
   2. when an user un-check on 'like' button , the num_likes should decrease on the "emojis" table

 # Documentation
## Example of uploading file to supabase storage 
 import { createClient } from '@supabase/supabase-js'

// Create Supabase client
const supabase = createClient('your_project_url', 'your_supabase_api_key')

// Upload file using standard upload
async function uploadFile(file) {
  const { data, error } = await supabase.storage.from('bucket_name').upload('file_path', file)
  if (error) {
    // Handle error
  } else {
    // Handle success
  }
}
